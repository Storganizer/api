<box>
    <h2>Box</h2>
    <p>Name: <b>{ state.box.name }</b></p>
    <p>Location: <a if={ state.box.location } href="?location/{ state.box.location.id }">{ state.box.location.name }</a></p>

    <h2>Items</h2>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Amount</th>
        </tr>
      </thead>
      <tbody>

        <tr each={ item in state.box.items } key={ item.id }>
          <td><a href="?item/{ item.id }">{ item.name }</a></td>
          <td>{ item.description }</td>
          <td>{ item.amount }</td>
        </tr>

      </tbody>
    </table>

  <script>
    import  './style.css'

    export default {
      state: {
            box: false,
      },

      fetchLocation() {
        if (this.state.box == false) {

          let target = this
          function reqListener() {
            target.update({
              box: JSON.parse(this.responseText)
            })
          }

          const req = new XMLHttpRequest();
          req.addEventListener("load", reqListener);
          req.open("GET", "http://localhost:5000/box/" + this.props.params[0]);
          req.send();

        }
      },

      onMounted() {
        this.fetchLocation()
      }
    }

  </script>

</box>